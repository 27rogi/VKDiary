import { MessageContext } from 'vk-io';
import { BaseCommand } from '../../core/classes/BaseCommand';
import permissions from '../../core/database/models/permissions';

export default class extends BaseCommand {
    constructor() {
        super();
        this.commandData = {
            command: '–ø–æ–º–æ—â—å',
            aliases: ['help'],
            permissionLevel: 0,
            local: false
        }
    }

    // TODO: implement dynamic generation to make command scalable
    async execute(context: MessageContext, args: string[], next: any) {
        const message = [
            `üîÆ –°–ø—Ä–∞–≤–∫–∞ –ø–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º –∫–æ–º–∞–Ω–¥–∞–º –≤ –±–µ—Å–µ–¥–µ`,
            ``,
            `‚ùó –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª–æ–≤ –≤ –∫–æ–º–∞–Ω–¥–µ –∫–∞–∫ –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–¥–µ–ª–∏—Ç—å –∏—Ö –∫–∞–≤—ã—á–∫–∞–º–∏, –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: /–æ–±—ä—è–≤–∏—Ç—å "–≠—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–≤."`,
            ``,
            `‚ñ™ /–ø–æ–º–æ—â—å ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –≤ –±–µ—Å–µ–¥–µ`,
            `‚ñ™ /—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ <–¥–µ–Ω—å_–º–µ—Å—è—Ü–∞?> <–Ω–æ–º–µ—Ä_–º–µ—Å—è—Ü–∞?> ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –≤ –±–µ—Å–µ–¥–µ`,
        ];

        if (!context.isDM) {
            message.push(`\n‚ö† –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –≤ –±–µ—Å–µ–¥–µ: [/–¥–∑, /–ø—Ä–µ–¥–º–µ—Ç—ã, /–ø—Ä–µ–¥–º–µ—Ç]`,)
        } else {
            message.push(
                `‚ñ™ /–¥–∑ <–Ω–æ–º–µ—Ä_–ø—Ä–µ–¥–º–µ—Ç–∞ | –¥–æ–±–∞–≤–∏—Ç—å?/—É–¥–∞–ª–∏—Ç—å?> ‚Äî –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –î–ó`,
                `‚ñ™ /–ø—Ä–µ–¥–º–µ—Ç—ã <–Ω–æ–º–µ—Ä_—Å—Ç—Ä–∞–Ω–∏—Ü—ã?> ‚Äî –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±—ã—Å—Ç—Ä–æ–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–µ–≥–æ –≤–∞—Å –ø—Ä–µ–¥–º–µ—Ç–∞`,
                `‚ñ™ /–ø—Ä–µ–¥–º–µ—Ç <–Ω–æ–º–µ—Ä_–ø—Ä–µ–¥–º–µ—Ç–∞> ‚Äî –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–µ–¥–º–µ—Ç–µ`,
            )
        }

        const userPerms = await permissions.findOne({ userId: context.senderId.toString() }).exec();

        if (userPerms !== null) {
            if (userPerms.permissionLevel >= 100) {
                message.push(
                    `\nüü° –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞\n`,
                    `‚ñ™ /–¥–æ–±–∞–≤–∏—Ç—å—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ <–Ω–æ–º–µ—Ä_–ø—Ä–µ–¥–º–µ—Ç–∞> <–Ω–æ–º–µ—Ä_–ø–∞—Ä—ã> <–¥–µ–Ω—å(1-7)> <—á–µ—Ç–Ω–∞—è?> ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ –¥–Ω–µ–≤–Ω–∏–∫`,
                    `‚ñ™ /–¥–æ–±–∞–≤–∏—Ç—å–≤—Ä–µ–º—è <–Ω–∞—á–∞–ª–æ> <–∫–æ–Ω–µ—Ü> ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ (–ø–∞—Ä—ã)`,
                    `‚ñ™ /–¥–æ–±–∞–≤–∏—Ç—å–ø—Ä–µ–¥–º–µ—Ç <–Ω–∞–∑–≤–∞–Ω–∏–µ> <–Ω–æ–º–µ—Ä_–∫–∞–±–∏–Ω–µ—Ç–∞> <—É—á–∏—Ç–µ–ª—å> ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ –¥–Ω–µ–≤–Ω–∏–∫`,
                    `‚ñ™ /–¥–æ–±–∞–≤–∏—Ç—å–∑–∞–º–µ–Ω—É <–Ω–æ–º–µ—Ä_—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è> <–Ω–æ–º–µ—Ä_–∑–∞–º–µ–Ω—è—é—â–µ–≥–æ_–ø—Ä–µ–¥–º–µ—Ç–∞> <–¥–∞—Ç–∞_–∑–∞–º–µ–Ω—ã> <–Ω–æ–º–µ—Ä_–∫–∞–±–∏–Ω–µ—Ç–∞?> <—É—á–∏—Ç–µ–ª—å?> ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ–Ω—ã —É—Ä–æ–∫–∞ –≤ –¥–Ω–µ–≤–Ω–∏–∫`,
                    `‚ñ™ /–∞ <–ø—Ä–µ–¥–º–µ—Ç—ã/—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ> ‚Äî –î–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤/—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–∑ –ë–î –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏`,
                    `‚ñ™ /–æ–±—ä—è–≤–∏—Ç—å <—Ç–µ–∫—Å—Ç_–¥–ª—è_–æ–±—å—è–≤–ª–µ–Ω–∏—è> ‚Äî –ú–∞—Å—Å–æ–≤–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –≤—Å–µ —Å–µ—Ä–≤–µ—Ä–∞ —Å –±–æ—Ç–æ–º`,
                )
            }
        }

        context.send(message.join('\n'));
    }
}
